<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Manage Exams</title>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #f4f6f8; margin: 0; }
    .navbar { background: #343a40; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; color: white; }
    .nav-links a { color: #ddd; text-decoration: none; margin-left: 20px; font-weight: 500; }
    .nav-links a:hover, .nav-links a.active { color: white; border-bottom: 2px solid #2c7be5; }
    
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; max-width: 1100px; margin: 30px auto; padding: 0 20px; }
    .card { background: white; padding: 25px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    h3 { color: #2c7be5; margin-top: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
    input, select { width: 100%; padding: 10px; margin: 8px 0 15px 0; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; }
    label { font-weight: bold; color: #555; font-size: 0.9rem; }
    .btn { width: 100%; padding: 10px; border: none; border-radius: 4px; cursor: pointer; color: white; }
    .btn-blue { background: #007bff; }
  </style>
</head>
<body>

  <div class="navbar">
    <div style="font-size: 1.2rem; font-weight: bold;">Exam System</div>
    <div class="nav-links">
      <a href="/staff-dashboard">Student List</a>
      <a href="/add-student">Add Student</a>
      <a href="/manage-exams" class="active">Manage Exams</a>
      <a href="/logout" style="background:#dc3545; padding: 5px 10px; border-radius:4px;">Logout</a>
    </div>
  </div>

  <div class="grid">
    
    <div class="card">
      <h3>1. Create Master Exam</h3>
      <p style="color:#666; font-size:0.9rem;">Create the main exam event (e.g., "Finals 2025") before scheduling it for classes.</p>
      
      <form action="/create-exam" method="POST">
        <label>Exam Name</label>
        <input type="text" name="exam_name" placeholder="e.g. Midterm Spring 2025" required>
        
        <label>Start Date</label>
        <input type="date" name="exam_date" required>
        
        <button class="btn btn-blue">Create Exam Event</button>
      </form>
    </div>

    <div class="card">
      <h3>2. Schedule Exam for Class</h3>
      <p style="color:#666; font-size:0.9rem;">Link a Master Exam to a Class, Subject, and Teacher.</p>
      
      <form action="/schedule-exam" method="POST">
        <label>Select Master Exam</label>
        <select name="exam_id" required>
          <% exams.forEach(e => { %>
            <option value="<%= e.exam_id %>"><%= e.exam_name %> (<%= new Date(e.exam_date).toDateString() %>)</option>
          <% }) %>
        </select>

        <label>Target Class</label>
        <select name="class_id" required>
          <% classes.forEach(c => { %>
            <option value="<%= c.class_id %>"><%= c.class_name %> - <%= c.section %></option>
          <% }) %>
        </select>

        <div style="display: flex; gap: 10px;">
          <div style="flex: 1;">
            <label>Subject</label>
            <select name="subject_id" required>
              <% subjects.forEach(s => { %>
                <option value="<%= s.subject_id %>"><%= s.subject_name %></option>
              <% }) %>
            </select>
          </div>
          <div style="flex: 1;">
            <label>Invigilator/Teacher</label>
            <select name="teacher_id" required>
              <% teachers.forEach(t => { %>
                <option value="<%= t.teacher_id %>"><%= t.teacher_name %></option>
              <% }) %>
            </select>
          </div>
        </div>

        <button class="btn btn-blue" style="margin-top: 5px;">Schedule Exam</button>
      </form>
    </div>
  </div>

</body>
</html>